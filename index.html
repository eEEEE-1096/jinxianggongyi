<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>锦湘工艺 </title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/styles/main.css">
</head>
<body>
    <nav id="navbar">
        <div class="brand">
            <h1>锦湘工艺</h1>
            <small>Jinxiang Process</small>
        </div>
        <div class="nav-links">
            <a href="#home" data-section="home">首页</a>
            <a href="#intro" data-section="intro">服务器简介</a>
            <a href="#buildings" data-section="buildings">建筑欣赏</a>
            <a href="#rules" data-section="rules">服务器规定</a>
            <a href="#news" data-section="news">服务器新闻</a>
            <a href="#progress" data-section="progress">建设进度</a>
            <a href="#punishment" data-section="punishment">处罚公示</a>
            <a href="#join" data-section="join">加入我们</a>
            <a href="#message" data-section="message">留言</a>
            <a href="#login" id="auth-link" data-auth="guest">登录/注册</a>
            <div id="user-menu" data-auth="authenticated">
                <img id="user-avatar" data-user="avatar" class="avatar">
                <span data-user="username"></span>
            </div>
        </div>
    </nav>

    <main>
        <section id="home" data-page="home" class="active">
            <div class="container">
                <h1>欢迎来到锦湘工艺</h1>
                <p>我们专注于打造一个高质量的Minecraft服务器</p>
            </div>
        </section>

        <section id="intro" data-page="intro">
            <div class="container">
                <h2>服务器简介</h2>
                <div id="intro-content"></div>
                <div class="admin-controls">
                    <button class="btn" onclick="openEditor('intro')">编辑</button>
                </div>
            </div>
        </section>

        <section id="buildings" data-page="buildings">
            <div class="container">
                <h2>建筑欣赏</h2>
                <div id="buildings-container"></div>
                <div class="admin-controls">
                    <button class="btn" onclick="openBuildingEditor()">添加建筑</button>
                </div>
                <a href="gallery.html" class="btn">查看完整画廊</a>
            </div>
        </section>

        <section id="rules" data-page="rules">
            <div class="container">
                <h2>服务器规定</h2>
                <div id="rules-content"></div>
                <div class="admin-controls">
                    <button class="btn" onclick="openEditor('rules')">编辑</button>
                </div>
            </div>
        </section>

        <section id="news" data-page="news">
            <div class="container">
                <h2>服务器新闻</h2>
                <div id="news-container"></div>
                <div class="admin-controls">
                    <button class="btn" onclick="openPostEditor('news')">发布新闻</button>
                </div>
            </div>
        </section>

        <section id="progress" data-page="progress">
            <div class="container">
                <h2>建设进度</h2>
                <div id="progress-container"></div>
                <div class="admin-controls">
                    <button class="btn" onclick="openPostEditor('progress')">发布进度</button>
                </div>
            </div>
        </section>

        <section id="punishment" data-page="punishment">
            <div class="container">
                <h2>处罚公示</h2>
                <div id="punishment-container"></div>
                <div class="admin-controls">
                    <button class="btn" onclick="openPostEditor('punishment')">发布处罚</button>
                </div>
            </div>
        </section>

        <section id="join" data-page="join">
            <div class="container">
                <h2>加入我们</h2>
                <div class="qq-group">
                    QQ群: <span>949043991</span>
                    <button class="copy-btn" onclick="copyQQ()">复制</button>
                </div>
            </div>
        </section>

        <section id="message" data-page="message">
            <div class="container">
                <h2>留言板</h2>
                <div id="message-container"></div>
                <form id="message-form" data-auth="authenticated">
                    <textarea id="message-content" placeholder="留下您的留言..." required></textarea>
                    <button type="submit" class="btn">提交</button>
                </form>
                <div id="message-feedback" class="feedback"></div>
            </div>
        </section>
    </main>

    <div id="auth-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('auth-modal')">&times;</span>
            <div class="auth-tabs">
                <button class="tab active" data-tab="login">登录</button>
                <button class="tab" data-tab="register">注册</button>
            </div>
            
            <form id="login-form" class="auth-form active">
                <input type="email" id="login-email" placeholder="邮箱" required>
                <input type="password" id="login-password" placeholder="密码" required>
                <a href="#forgot" class="forgot-link">忘记密码?</a>
                <button type="submit" class="btn">登录</button>
                <div id="login-feedback" class="feedback"></div>
            </form>
            
            <form id="register-form" class="auth-form">
                <input type="text" id="register-username" placeholder="用户名" required minlength="3">
                <input type="email" id="register-email" placeholder="邮箱" required>
                <input type="password" id="register-password" placeholder="密码" required minlength="6">
                <input type="password" id="register-confirm" placeholder="确认密码" required>
                <input type="text" id="register-admin-code" placeholder="管理员邀请码(可选)">
                <button type="submit" class="btn">注册</button>
                <div id="register-feedback" class="feedback"></div>
            </form>
            
            <form id="forgot-form" class="auth-form">
                <input type="email" id="forgot-email" placeholder="注册邮箱" required>
                <button type="submit" class="btn">发送重置链接</button>
                <a href="#login" class="back-link">返回登录</a>
                <div id="forgot-feedback" class="feedback"></div>
            </form>
        </div>
    </div>

    <script type="module" src="js/config.js"></script>
    <script type="module" src="js/auth.js"></script>
    <script type="module" src="js/main.js"></script>
</body>
</html>
